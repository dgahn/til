## URI와 웹 브라우저 요청 흐림

### URI

- 인터넷 상에서 리소스를 식별하는 방식이다.

- URL과 URN으로 구성이 되어 있고 URL은 위치를 의미하고 URN은 이름을 말한다.

- 웹 브라우저에 작성하는 것이 URL이고 URN은 이런 것들을 이름으로 부여하는 것이다. 

<br />

### URI 뜻
- Uniform : 리소스를 식별하는 통일된 방식
- Resource : 자원, URI로 식별할 수 있는 모든 것
- Identifier : 다른 리소스와 구분하는데 필요한 정보

- URL은 리소스가 있는 위치를 지정한다. 그러므로 브라우저에 URL을 치면 그 결과물이 나온다.

- URN은 이름을 부여하는 방식인데 잘 안쓰인다. 

- 보통 URI와 URL은 같은 의미로 사용한다.

<br />

### URL 분석

- https://www.google.com/search?q=hello&hl=ko
- scheme://[userinfo@]host[:port][/path][?query][#frament]

#### scheme

- 클라이언트와 서버가 어떤 방식으로 연결할 것인가를 나타낸다.

#### userinfo
- url에 사용자 정보를 포함하여 인증을 해야하는 경우 쓴다.
- 거의 사용하지 않는다.

#### host

- 도메인명 또는 IP 주소를 직접 사용가능하다.

#### port

- 일반적으로 80, 443 사용

#### path

- 리소스의 경로(path)

- 계층적인 구조로 설계한다. 계층 적인 구조로 인해 이해를 돕는다.

#### query

- key=value 형태로 데이터를 준다. 

- 시작하는 경우 ?로 시작한다.

- 보통 query parameter 또는 query string으로 불린다.

#### fragment

- html 내부 북마크로 사용한다.

<br />

### 웹 브라우저 요청 흐름

1. 웹브라우저에서 웹 주소를 입력하면 DNS로부터 IP를 찾아 해당 서버로 요청을 보낸다. 만약 https면 자동으로 443 포트를 부여한다.

2. HTTP 요청 메시지를 생성해서 서버에 전송한다.

3. socket 라이브러리를 통해서 TCP/IP 연결하여 데이터를 전송한다. 

4. 패킷을 생성하는데 이 패킷 구조는 다음과 같다.
    - 출발지 IP, PORT
    - 목적지 IP, PORT
    - 전송 HTTP 메시지

5. 서버에서 요청 패킷을 도착하면 TCP/IP 패킷을 다 버리고 HTTP 요청 메시지를 해석한다.

6. 서버에서는 해석한 내용을 바탕으로 HTTP 응답 메시지를 다시 클라이언트로 보낸다.